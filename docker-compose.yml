version: '3'

services:
  nginx:
    image: nginx:alpine
    entrypoint: /bin/sh
    command:
      - -c
      - |
        echo '
          server {
            listen       80;
            server_name  localhost;

            location / {
                root   /usr/share/nginx/html;
                index  index.html index.htm;
            }

            error_page   500 502 503 504  /50x.html;
            location = /50x.html {
                root   /usr/share/nginx/html;
            }
          }
        ' > /etc/nginx/conf.d/default.conf
        nginx -T && nginx -g 'daemon off;'
    ports:
      - '3000:80'
